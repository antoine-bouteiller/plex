# yaml-language-server: $schema=https://www.authelia.com/schemas/v4.39/json-schema/configuration.json
---
theme: 'dark'

server:
  endpoints:
    authz:
      forward-auth:
        implementation: 'ForwardAuth'

identity_validation:
  reset_password:
    jwt_lifespan: '5 minutes'
    jwt_algorithm: 'HS256'

authentication_backend:
  file:
    path: '/config/users.yml'
    password:
      algorithm: 'argon2'

password_policy:
  zxcvbn:
    enabled: true
    min_score: 3

access_control:
  default_policy: 'deny'

  networks:
    - name: 'internal'
      networks:
        - '10.0.0.0/8'
        - '172.16.0.0/12'
        - '192.168.0.0/18'
  rules:
    - domain: '*.{{ mustEnv "DOMAIN" }}'
      policy: 'bypass'
      networks:
        - 'internal'
    - domain: '*.{{ mustEnv "DOMAIN" }}'
      policy: 'one_factor'

session:
  cookies:
    - name: 'authelia_session'
      domain: '{{ mustEnv "DOMAIN" }}'
      authelia_url: 'https://auth.{{ mustEnv "DOMAIN" }}'

regulation:
  max_retries: 3
  find_time: '2 minutes'

  ban_time: '5 minutes'

storage:
  local:
    path: '/config/db.sqlite3'

notifier:
  disable_startup_check: false

  filesystem:
    filename: '/config/notification.txt'
